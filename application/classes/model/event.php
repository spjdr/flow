<?php defined('SYSPATH') or die('No direct script access.');class Model_Event extends ORM {  	protected $_has_many = array(		'tags' 		=> array('model' => 'tag', 'through' => 'events_tags'),	);		protected $_belongs_to = array(		'stream'		=> array('model'=>'stream')	);		protected $_rules = array(		'title' => array(			'not_empty' => NULL,			'min_length' => array(4),			'max_length' => array(255)		),		'description' => array(			'not_empty' => NULL		),		'notes' => array(		),		'created_timestamp' => array(			'not_empty' => NULL		)	); 	public function validate_create(& $array) 	{		// Initialise the validation library and setup some rules				$array = Validate::factory($array)						->rules('title', $this->_rules['title'])						->rules('description', $this->_rules['description'])						->rules('notes', $this->_rules['notes'])						->filter('title', 'trim')						->filter('description', 'trim')						->filter('notes', 'trim'); 				return $array;	}		public function validate_edit(& $array)	{			// Initialise the validation library and setup some rules				$array = Validate::factory($array)						->rules('title', $this->_rules['title'])						->rules('description', $this->_rules['description'])						->rules('notes', $this->_rules['notes'])						->filter('title', 'trim')						->filter('description', 'trim')						->filter('notes', 'trim'); 				return $array;	}		public function save()	{		if (!isset(parent::__get('created_timestamp')) {			parent::__set('created_timestamp',time());		}				parent::save();	}	}