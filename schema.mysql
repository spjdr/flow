-- phpMyAdmin SQL Dump-- version 3.2.5-- http://www.phpmyadmin.net---- Host: localhost-- Generation Time: Apr 12, 2011 at 07:35 PM-- Server version: 5.1.44-- PHP Version: 5.3.2SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";---- Database: `flow`---- ------------------------------------------------------------ Table structure for table `editors_streams`--CREATE TABLE `editors_streams` (  `stream_id` int(11) unsigned NOT NULL,  `user_id` int(11) unsigned NOT NULL,  PRIMARY KEY (`stream_id`,`user_id`),  KEY `user_id` (`user_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;-- ------------------------------------------------------------ Table structure for table `events`--CREATE TABLE `events` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `stream_id` int(11) unsigned NOT NULL,  `uri` varchar(255) NOT NULL,  `title` varchar(255) NOT NULL,  `timestamp` int(11) unsigned NOT NULL,  `duration` int(11) NOT NULL,  `description` text NOT NULL,  `notes` text NOT NULL,  `created_timestamp` int(11) unsigned NOT NULL,  `cache` text NOT NULL,  PRIMARY KEY (`id`),  KEY `events_ibfk_1` (`stream_id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=21 ;-- ------------------------------------------------------------ Table structure for table `events_tags`--CREATE TABLE `events_tags` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `event_id` int(11) unsigned NOT NULL,  `tag_id` int(11) unsigned NOT NULL,  PRIMARY KEY (`id`),  KEY `events_tags_ibfk_1` (`event_id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=35 ;-- ------------------------------------------------------------ Table structure for table `flows`--CREATE TABLE `flows` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `uri` varchar(255) NOT NULL,  `title` varchar(255) NOT NULL,  `description` text NOT NULL,  `start_date` varchar(10) NOT NULL,  `end_date` varchar(10) NOT NULL,  `created_timestamp` int(11) unsigned NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=9 ;-- ------------------------------------------------------------ Table structure for table `flows_users`--CREATE TABLE `flows_users` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `flow_id` int(11) unsigned NOT NULL,  `user_id` int(11) unsigned NOT NULL,  `master` tinyint(1) NOT NULL,  `created_timestamp` int(11) unsigned NOT NULL,  PRIMARY KEY (`id`),  KEY `flows_users_ibfk_1` (`flow_id`),  KEY `flows_users_ibfk_2` (`user_id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;-- ------------------------------------------------------------ Table structure for table `invitations`--CREATE TABLE `invitations` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `sender_id` int(11) unsigned NOT NULL,  `flow_id` int(11) unsigned NOT NULL,  `secret` varchar(255) NOT NULL,  `email` varchar(255) NOT NULL,  `text` text NOT NULL,  `created_timestamp` int(11) unsigned NOT NULL,  `accepted` tinyint(1) NOT NULL,  `deleted` tinyint(1) NOT NULL,  PRIMARY KEY (`id`),  KEY `invitations_ibfk_1` (`flow_id`),  KEY `invitations_ibfk_2` (`sender_id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ;-- ------------------------------------------------------------ Table structure for table `pages`--CREATE TABLE `pages` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `user_id` int(11) unsigned NOT NULL,  `language` varchar(2) NOT NULL,  `uri` varchar(255) NOT NULL,  `title` varchar(255) NOT NULL,  `body` text NOT NULL,  `created_timestamp` int(11) unsigned NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;-- ------------------------------------------------------------ Table structure for table `roles`--CREATE TABLE `roles` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `name` varchar(32) NOT NULL,  `description` varchar(255) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `uniq_name` (`name`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;-- ------------------------------------------------------------ Table structure for table `roles_users`--CREATE TABLE `roles_users` (  `user_id` int(11) unsigned NOT NULL,  `role_id` int(11) unsigned NOT NULL,  PRIMARY KEY (`user_id`,`role_id`),  KEY `fk_role_id` (`role_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;-- ------------------------------------------------------------ Table structure for table `streams`--CREATE TABLE `streams` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `flow_id` int(11) unsigned NOT NULL,  `uri` varchar(255) NOT NULL,  `color` varchar(7) NOT NULL,  `title` varchar(255) NOT NULL,  `start_date` varchar(10) NOT NULL,  `end_date` varchar(10) NOT NULL,  `description` text NOT NULL,  `created_timestamp` int(11) unsigned NOT NULL,  PRIMARY KEY (`id`),  KEY `streams_ibfk_1` (`flow_id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 ;-- ------------------------------------------------------------ Table structure for table `tags`--CREATE TABLE `tags` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `flow_id` int(11) unsigned NOT NULL,  `title` varchar(255) NOT NULL,  `color` varchar(7) NOT NULL,  PRIMARY KEY (`id`),  KEY `tags_ibfk_1` (`flow_id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=36 ;-- ------------------------------------------------------------ Table structure for table `users`--CREATE TABLE `users` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `email` varchar(127) NOT NULL,  `username` varchar(127) NOT NULL DEFAULT '',  `fullname` varchar(40) NOT NULL,  `password` char(50) NOT NULL,  `description` text NOT NULL,  `logins` int(10) unsigned NOT NULL DEFAULT '0',  `last_login` int(10) unsigned DEFAULT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `uniq_username` (`username`),  UNIQUE KEY `uniq_email` (`email`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;-- ------------------------------------------------------------ Table structure for table `user_tokens`--CREATE TABLE `user_tokens` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `user_id` int(11) unsigned NOT NULL,  `user_agent` varchar(40) NOT NULL,  `token` varchar(32) NOT NULL,  `created` int(10) unsigned NOT NULL,  `expires` int(10) unsigned NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `uniq_token` (`token`),  KEY `fk_user_id` (`user_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;---- Constraints for dumped tables------ Constraints for table `editors_streams`--ALTER TABLE `editors_streams`  ADD CONSTRAINT `editors_streams_ibfk_1` FOREIGN KEY (`stream_id`) REFERENCES `streams` (`id`) ON DELETE CASCADE,  ADD CONSTRAINT `editors_streams_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;---- Constraints for table `events`--ALTER TABLE `events`  ADD CONSTRAINT `events_ibfk_1` FOREIGN KEY (`stream_id`) REFERENCES `streams` (`id`) ON DELETE CASCADE;---- Constraints for table `events_tags`--ALTER TABLE `events_tags`  ADD CONSTRAINT `events_tags_ibfk_1` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE;---- Constraints for table `flows_users`--ALTER TABLE `flows_users`  ADD CONSTRAINT `flows_users_ibfk_1` FOREIGN KEY (`flow_id`) REFERENCES `flows` (`id`) ON DELETE CASCADE,  ADD CONSTRAINT `flows_users_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;---- Constraints for table `invitations`--ALTER TABLE `invitations`  ADD CONSTRAINT `invitations_ibfk_1` FOREIGN KEY (`flow_id`) REFERENCES `flows` (`id`) ON DELETE CASCADE,  ADD CONSTRAINT `invitations_ibfk_2` FOREIGN KEY (`sender_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;---- Constraints for table `roles_users`--ALTER TABLE `roles_users`  ADD CONSTRAINT `roles_users_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,  ADD CONSTRAINT `roles_users_ibfk_2` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE;---- Constraints for table `streams`--ALTER TABLE `streams`  ADD CONSTRAINT `streams_ibfk_1` FOREIGN KEY (`flow_id`) REFERENCES `flows` (`id`) ON DELETE CASCADE;---- Constraints for table `tags`--ALTER TABLE `tags`  ADD CONSTRAINT `tags_ibfk_1` FOREIGN KEY (`flow_id`) REFERENCES `flows` (`id`) ON DELETE CASCADE;---- Constraints for table `user_tokens`--ALTER TABLE `user_tokens`  ADD CONSTRAINT `user_tokens_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;---- Dumping data for table `roles`--INSERT INTO `roles` VALUES(1, 'login', 'Login privileges, granted after account confirmation');INSERT INTO `roles` VALUES(2, 'admin', 'Administrative user, has access to everything.');INSERT INTO `roles` VALUES(3, 'moderator', '');